{\rtf1\ansi\deff3\adeflang1025
{\fonttbl{\f0\froman\fprq2\fcharset0 Times New Roman;}{\f1\froman\fprq2\fcharset2 Symbol;}{\f2\fswiss\fprq2\fcharset0 Arial;}{\f3\froman\fprq2\fcharset0 Liberation Serif{\*\falt Times New Roman};}{\f4\fswiss\fprq2\fcharset0 Liberation Sans{\*\falt Arial};}{\f5\fnil\fprq2\fcharset0 Droid Sans Fallback;}{\f6\fnil\fprq2\fcharset0 FreeSans;}{\f7\fswiss\fprq0\fcharset128 FreeSans;}}
{\colortbl;\red0\green0\blue0;\red0\green0\blue10;\red128\green128\blue128;}
{\stylesheet{\s0\snext0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033 Normal;}
{\s15\sbasedon0\snext16\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\sb240\sa120\keepn\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs28\alang1081\loch\f4\fs28\lang1033 Heading;}
{\s16\sbasedon0\snext16\sl288\slmult1\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\sb0\sa140\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\loch\f3\fs24\lang1033 Text Body;}
{\s17\sbasedon16\snext17\sl288\slmult1\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\sb0\sa140\ltrpar\cf2\dbch\af5\langfe2052\dbch\af7\afs24\alang1081\loch\f3\fs24\lang1033 List;}
{\s18\sbasedon0\snext18\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\sb120\sa120\noline\ltrpar\cf2\i\dbch\af5\langfe2052\dbch\af7\afs24\alang1081\ai\loch\f3\fs24\lang1033 Caption;}
{\s19\sbasedon0\snext19\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\noline\ltrpar\cf2\dbch\af5\langfe2052\dbch\af7\afs24\alang1081\loch\f3\fs24\lang1033 Index;}
}{\info{\creatim\yr2016\mo9\dy16\hr17\min5}{\revtim\yr0\mo0\dy0\hr0\min0}{\printim\yr0\mo0\dy0\hr0\min0}{\comment LibreOffice}{\vern67241986}}\deftab709
\viewscale95
{\*\pgdsctbl
{\pgdsc0\pgdscuse451\pgwsxn12240\pghsxn15840\marglsxn1134\margrsxn1134\margtsxn1134\margbsxn1134\pgdscnxt0 Default Style;}}
\formshade{\*\pgdscno0}\paperh15840\paperw12240\margl1134\margr1134\margt1134\margb1134\sectd\sbknone\sectunlocked1\pgndec\pgwsxn12240\pghsxn15840\marglsxn1134\margrsxn1134\margtsxn1134\margbsxn1134\ftnbj\ftnstart1\ftnrstcont\ftnnar\aenddoc\aftnrstcont\aftnstart1\aftnnrlc
\pgndec\pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/version'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'active_record'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'awesome_print'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'filesize'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'total_compressor'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'docsplit'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'pdf_utils'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'prawn'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'pdf-reader'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/tools.rb'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/validating.rb'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/unzipping.rb'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/extracting.rb'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/saving.rb'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
require 'act_as_page_extractor/modules/interface'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
module ActAsPageExtractor}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
extend ActiveSupport::Concern}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
included do}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
before_create \{ self.page_extraction_state = EXTRACTING_STATES[:new] \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
before_destroy :remove_files}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
# attr_reader :options}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
module ClassMethods}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
def act_as_page_extractor(options: \{\})}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
define_method(:save_as_pdf)\{|*args| options[:save_as_pdf] \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
define_method(:extracted_filename)\{|*args| self.send(options[:filename].to_sym) \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
ActAsPageExtractor.define_singleton_method(:extracted_filename) \{|*args| options[:filename] \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
ActAsPageExtractor.define_singleton_method(:document_class) \{|*args| options[:document_class].constantize \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
define_method(:extracted_document_id)\{|*args| options[:document_id] \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
define_method(:additional_fields)\{|*args| options[:additional_fields] \}}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
EXTRACTING_STATES = \{}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
new: 'new',}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
extracting: 'extracting',}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
extracted: 'extracted',}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
'error.extraction': 'error.extraction'}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
\}.freeze}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
TMP_EXTRACTION_FILE_STORAGE = "#\{Dir.pwd\}/tmp/page_extraction".freeze}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
FILE_STORAGE = "#\{Dir.pwd\}/public".freeze}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
PDF_STORAGE = "#\{FILE_STORAGE\}/uploads/extracted/pdf".freeze}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def initialized}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
# add all need callbacks}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
#on destroy remove pdf}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
#Add to Readme!!}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
#rails g act_as_page_extractor:migration Document category_id user_id}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
# add to [Document] model:}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
# has_many :extracted_pages, dependent: :destroy}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
create_pdf_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def page_extract!}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
initialized}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
cleanup_pages}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
create_tmp_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
begin}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
copy_document}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
# debug_info}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
unzip_document}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
if valid_document}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
        }{\rtlch \ltrch\loch
extract_pages}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
        }{\rtlch \ltrch\loch
save_to_db}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
ensure}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
update_state}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
save_pdf}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
finish}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def create_pdf_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
if save_as_pdf}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
      }{\rtlch \ltrch\loch
FileUtils::mkdir_p(PDF_STORAGE) unless File.exists?(PDF_STORAGE)}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def create_tmp_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
@tmp_dir = "#\{TMP_EXTRACTION_FILE_STORAGE\}/#\{SecureRandom.hex(6)\}"}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
FileUtils::mkdir_p(@tmp_dir) unless File.exists?(@tmp_dir)}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def copy_document}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
@origin_document_path = "#\{FILE_STORAGE\}#\{self.send(:extracted_filename).url.to_s\}"}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
ap @origin_document_path}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
FileUtils.cp(@origin_document_path, @tmp_dir)}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
@copy_document_path = "#\{@tmp_dir\}/#\{@origin_document_path.split("/").last\}"}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
@document_filename = @origin_document_path.split("/").last}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def finish}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
remove_tmp_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
def remove_tmp_dir}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
    }{\rtlch \ltrch\loch
FileUtils.rm_rf(@tmp_dir) if @tmp_dir =~ /\\/tmp\\//}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch
  }{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# rails g model ExtractedPage page:text document_id:integer category_id:integer page_number:integer}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# Rails 4 way}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# 9.2.7.1 Multiple Callback Methods in One Class}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# 258 page}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033\rtlch \ltrch\loch

\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# class ActiveRecord::Base}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#   def self.acts_as_page_extractor(document_field=:filename)}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#     auditor = Auditor.new(audit_log)}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#     after_create auditor}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#     after_update auditor}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#     after_destroy auditor}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
#   end}
\par \pard\plain \s0\ql\nowidctlpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\ltrpar\cf2\dbch\af5\langfe2052\dbch\af6\afs24\alang1081\kerning1\loch\f3\fs24\lang1033{\rtlch \ltrch\loch
# end}
\par }